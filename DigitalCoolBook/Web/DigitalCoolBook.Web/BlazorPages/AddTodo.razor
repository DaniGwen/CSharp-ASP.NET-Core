@page "/addtodo/{taskId:int}"

@inject ITodoService TodoService
@inject NavigationManager NavigationManager

<div class="page-wrapper offset-md-3 col-md-6 offset-sm-0 col-sm-12 mt-3">
    <h3>Add ToDo</h3>
    <EditForm Model="@Todo" OnValidSubmit="Submit">
        <div class="form-group">
            <span>Content</span>
            <textarea class="form-control" rows="3" @bind="Todo.Content"></textarea>
        </div>
        <hr />
        <Navlink class="btn btn-sm btn-success" @onclick="Submit">Save <i class="fas fa-check"></i></Navlink>
    </EditForm>
</div>

@code {
    public Todo Todo { get; set; } = new Todo();

    [Parameter]
    public int TaskId { get; set; }

    private async Task Submit()
    {
        Todo.TodoTaskId = TaskId;

        await TodoService.AddTodo(Todo);

        NavigationManager.NavigateTo("/Initial");
    }
}
