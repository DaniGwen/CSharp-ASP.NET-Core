@model RentCargoBus.Web.Models.Index.CarsVansViewModel
@{
    ViewData["Title"] = "Cargo van partial";
    var cargoVans = Model.Vans.Where(van => van.Type == RentCargoBus.Data.Models.Enum.VanType.Cargo);
}

<article class="c-main__vehicles effect-stretch3">
    <h2 class="c-main__vehicles__title">Cargo vans:</h2>
    <section class="c-main__vans">
        @if (cargoVans.Any())
        {
            @foreach (var van in cargoVans)
            {
                <div class="c-main__vans__container">
                    <a class="c-card" asp-controller="Home" asp-action="VanDetails" asp-route-id="@van.VanId">

                        <div class="c-card__wrapper">
                            @if (van.Images.Count > 0)
                            {
                                <img class="c-card__image"
                                     src="/images/@van.Images.FirstOrDefault().ImageName"
                                     alt="car" />
                            }
                            else
                            {
                                <img class="c-card__image"
                                     src="/images/default-van-icon.png"
                                     alt="car" />
                            }
                        </div>

                        <div class="c-card__info">
                            <h2 class="c-card__van-brand">@van.Brand</h2>
                            <h3 class="c-card__van-model">@van.Model</h3>
                            <div class="c-card__info__details">

                                <p class="c-card__info__details__price">
                                    Lease price:
                                    <span class="c-card__info__details__span">
                                        @van.HirePrice
                                    </span>Euro. / Day
                                </p>

                                @if (van.IsAvailable)
                                {
                                    <p class="c-card__info__availability">Available</p>
                                }
                                else
                                {
                                    <p class="c-card__info__availability c-card__info__availability--busy">
                                        Not Available
                                    </p>
                                }
                            </div>
                        </div>
                    </a>

                    @if (this.User.Identity.IsAuthenticated)
                    {
                        <article class="c-card__info__action__wrapper">
                            <a class="c-card__info__action"
                               asp-action="EditVan" asp-controller="Admin"
                               asp-route-id="@van.VanId">Edit</a>

                            <a class="c-card__info__action c-card__info__action--delete"
                               onclick="deleteVan(this)"
                               id="@van.VanId">Delete</a>
                        </article>
                    }
                </div>
            }
        }
        else
        {
            <h4 class="c-main__vans__no-vehicles">No vans at the moment.</h4>
        }

    </section>
</article>
